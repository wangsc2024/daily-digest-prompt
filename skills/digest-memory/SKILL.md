# Digest Memory Skill - æ‘˜è¦è¨˜æ†¶æŒä¹…åŒ–

## ç”¨é€”
åœ¨æ¯æ—¥æ‘˜è¦ Agent åŸ·è¡Œä¹‹é–“ä¿æŒä¸Šä¸‹æ–‡è¨˜æ†¶ï¼Œå¯¦ç¾è·¨æ¬¡è¿½è¹¤ã€‚

## è¨˜æ†¶æª”æ¡ˆä½ç½®
`context/digest-memory.json`

## è®€å–è¨˜æ†¶ï¼ˆAgent å•Ÿå‹•æ™‚ï¼‰

ç”¨ Read å·¥å…·è®€å– `context/digest-memory.json`ã€‚è‹¥æª”æ¡ˆä¸å­˜åœ¨ä»£è¡¨é¦–æ¬¡åŸ·è¡Œï¼Œè·³éå³å¯ã€‚

è¨˜æ†¶æª”æ¡ˆæ ¼å¼ï¼š
```json
{
  "last_run": "2026-02-11T08:00:00",
  "last_run_status": "success",
  "run_count": 42,
  "todoist": {
    "total_tasks": 5,
    "completed_count": 3,
    "pending_items": ["æœªå®Œæˆçš„ä»»å‹™åç¨±"]
  },
  "habits": {
    "streak_days": 14,
    "last_topic": "ç’°å¢ƒè¨­è¨ˆ",
    "topics_history": ["èº«ä»½èªåŒ", "ç¿’æ…£å †ç–Š", "ç’°å¢ƒè¨­è¨ˆ"]
  },
  "learning": {
    "streak_days": 14,
    "last_topic": "é–“éš”é‡è¤‡",
    "topics_history": ["è²»æ›¼æŠ€å·§", "åˆ»æ„ç·´ç¿’", "é–“éš”é‡è¤‡"]
  },
  "digest_summary": "æ˜¨æ—¥ 5 é …å¾…è¾¦å®Œæˆ 3 é …ï¼Œå±æ±æ–°è 2 å‰‡ï¼ŒAI å‹•æ…‹ 3 å‰‡"
}
```

## ä½¿ç”¨è¨˜æ†¶ç”¢ç”Ÿæ‘˜è¦é–‹é ­

è‹¥è¨˜æ†¶å­˜åœ¨ï¼Œåœ¨æ‘˜è¦æœ€ä¸Šæ–¹åŠ å…¥ã€Œé€£çºŒå ±åˆ°ã€å€å¡Šï¼š
```
ğŸ”„ é€£çºŒå ±åˆ°ç¬¬ N å¤©
- æ˜¨æ—¥å¾…è¾¦ï¼šå®Œæˆ M/N é …ï¼ˆæœªå®Œæˆï¼šXXXï¼‰
- ç¿’æ…£æç¤ºé€£çºŒ N å¤©
- å­¸ç¿’æŠ€å·§é€£çºŒ N å¤©
```

## å¯«å…¥è¨˜æ†¶ï¼ˆAgent çµæŸå‰ï¼Œntfy é€šçŸ¥ä¹‹å‰ï¼‰

æ¯æ¬¡åŸ·è¡ŒçµæŸæ™‚ï¼Œç”¨ Write å·¥å…·å¯«å…¥æ›´æ–°å¾Œçš„ `context/digest-memory.json`ã€‚

æ›´æ–°è¦å‰‡ï¼š
1. `last_run`ï¼šç•¶å‰æ™‚é–“ï¼ˆISO 8601 æ ¼å¼ï¼‰
2. `last_run_status`ï¼šæ•´é«”åŸ·è¡Œç‹€æ…‹ï¼ˆsuccess / partial / failedï¼‰
3. `run_count`ï¼šå‰æ¬¡å€¼ +1ï¼ˆé¦–æ¬¡ç‚º 1ï¼‰
4. `todoist`ï¼šæœ¬æ¬¡æŸ¥è©¢åˆ°çš„å¾…è¾¦çµ±è¨ˆ
5. `habits.streak_days`ï¼šè‹¥æ˜¨æ—¥æœ‰åŸ·è¡Œï¼ˆlast_run åœ¨ 24-48 å°æ™‚å…§ï¼‰ï¼Œ+1ï¼›å¦å‰‡é‡ç½®ç‚º 1
6. `habits.last_topic`ï¼šæœ¬æ¬¡ä½¿ç”¨çš„ç¿’æ…£æç¤ºä¸»é¡Œ
7. `habits.topics_history`ï¼šä¿ç•™æœ€è¿‘ 7 ç­†
8. `learning`ï¼šåŒä¸Šé‚è¼¯
9. `digest_summary`ï¼šæœ¬æ¬¡æ‘˜è¦çš„ä¸€å¥è©±ç¸½çµ

## è¨ˆç®—é€£çºŒå¤©æ•¸çš„é‚è¼¯

```
è‹¥ last_run å­˜åœ¨ï¼š
  æ™‚å·® = ç•¶å‰æ™‚é–“ - last_run
  è‹¥ æ™‚å·® < 48 å°æ™‚ï¼šstreak = å‰æ¬¡ streak + 1
  å¦å‰‡ï¼šstreak = 1
è‹¥ last_run ä¸å­˜åœ¨ï¼š
  streak = 1
```

## æ³¨æ„äº‹é …
- ç”¨ Write å·¥å…·å»ºç«‹ JSON æª”æ¡ˆï¼Œç¢ºä¿ UTF-8 ç·¨ç¢¼
- JSON å…§å®¹ä¸è¦åŒ…å«æ§åˆ¶å­—å…ƒï¼Œæ›è¡Œç”¨ \n
- è¨˜æ†¶æª”æ¡ˆä¸éœ€è¦åˆªé™¤ï¼ŒæŒçºŒç´¯ç©
