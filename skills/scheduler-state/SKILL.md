# Scheduler State Skill - æ’ç¨‹ç‹€æ…‹ç®¡ç†

## ç”¨é€”
è¿½è¹¤æ¯æ¬¡æ’ç¨‹åŸ·è¡Œçš„ç‹€æ…‹ï¼Œæä¾›å¥åº·åº¦å ±å‘Šã€‚

## ç‹€æ…‹æª”æ¡ˆä½ç½®
`state/scheduler-state.json`

## ç‹€æ…‹æª”æ¡ˆæ ¼å¼

```json
{
  "runs": [
    {
      "timestamp": "2026-02-11T08:00:00",
      "agent": "daily-digest",
      "status": "success",
      "duration_seconds": 45,
      "sections": {
        "todoist": "success",
        "pingtung_news": "success",
        "hackernews": "cached",
        "habits": "success",
        "learning": "success",
        "knowledge": "skipped",
        "zen": "success",
        "ntfy": "success"
      },
      "error": null
    }
  ]
}
```

### ç‹€æ…‹å€¼èªªæ˜
- `success`ï¼šè©²å€å¡Šæ­£å¸¸å®Œæˆ
- `cached`ï¼šä½¿ç”¨å¿«å–è³‡æ–™å®Œæˆ
- `skipped`ï¼šä¸»å‹•è·³éï¼ˆå¦‚çŸ¥è­˜åº«æœªå•Ÿå‹•ï¼‰
- `failed`ï¼šè©²å€å¡Šå¤±æ•—
- `partial`ï¼šéƒ¨åˆ†å®Œæˆ

## Agent å¯«å…¥ç‹€æ…‹ï¼ˆntfy é€šçŸ¥ä¹‹å¾Œã€æœ€å¾Œä¸€æ­¥ï¼‰

æ¯æ¬¡åŸ·è¡ŒçµæŸæ™‚ï¼Œç”¨ä»¥ä¸‹æ­¥é©Ÿæ›´æ–°ç‹€æ…‹ï¼š

1. ç”¨ Read å·¥å…·è®€å– `state/scheduler-state.json`ï¼ˆä¸å­˜åœ¨å‰‡åˆå§‹åŒ– `{"runs":[]}`ï¼‰
2. å°‡æœ¬æ¬¡åŸ·è¡Œè¨˜éŒ„åŠ å…¥ `runs` é™£åˆ—æœ«å°¾
3. è‹¥ `runs` è¶…é 30 ç­†ï¼Œç§»é™¤æœ€èˆŠçš„è¨˜éŒ„ï¼ˆåƒ…ä¿ç•™æœ€è¿‘ 30 ç­†ï¼‰
4. ç”¨ Write å·¥å…·å¯«å›æª”æ¡ˆ

## å¥åº·åº¦æ‘˜è¦ï¼ˆAgent å¯é¸åŠ å…¥æ‘˜è¦é–‹é ­ï¼‰

è‹¥ç‹€æ…‹æª”æ¡ˆå­˜åœ¨ä¸”æœ‰è¨˜éŒ„ï¼Œè¨ˆç®—è¿‘ 7 å¤©çµ±è¨ˆï¼š

```
ğŸ“Š ç³»çµ±å¥åº·åº¦ï¼ˆè¿‘ 7 å¤©ï¼‰
- åŸ·è¡Œæ¬¡æ•¸ï¼šN æ¬¡
- æˆåŠŸç‡ï¼šXX%
- å¹³å‡è€—æ™‚ï¼šXX ç§’
- æœ€è¿‘å¤±æ•—ï¼š[æ—¥æœŸ] [åŸå› ]ï¼ˆè‹¥ç„¡å‰‡é¡¯ç¤ºã€Œç„¡ã€ï¼‰
```

è¨ˆç®—æ–¹å¼ï¼š
- ç¯©é¸ `timestamp` åœ¨ 7 å¤©å…§çš„è¨˜éŒ„
- æˆåŠŸç‡ = status ç‚º success çš„æ¬¡æ•¸ / ç¸½æ¬¡æ•¸ Ã— 100%
- å¹³å‡è€—æ™‚ = æ‰€æœ‰ duration_seconds çš„å¹³å‡å€¼

## æ³¨æ„äº‹é …
- ç”¨ Write å·¥å…·å»ºç«‹ JSON æª”æ¡ˆï¼Œç¢ºä¿ UTF-8 ç·¨ç¢¼
- runs é™£åˆ—æœ€å¤šä¿ç•™ 30 ç­†ï¼Œé¿å…æª”æ¡ˆéå¤§
- æ¯æ¬¡åŸ·è¡Œéƒ½è¦å¯«å…¥ï¼ŒåŒ…æ‹¬å¤±æ•—çš„åŸ·è¡Œ
