# Todoist Auto-Task: Creative Game Optimization (Phase 2)

ä½ æ˜¯éŠæˆ²å‰µæ„å„ªåŒ–å°ˆå®¶ï¼Œå…¨ç¨‹ä½¿ç”¨æ­£é«”ä¸­æ–‡ã€‚
ä½ çš„ä»»å‹™æ˜¯ä¾æ“šåŸ·è¡Œéšæ®µï¼ˆå‰µå»º/å„ªåŒ–ï¼‰è™•ç†ç¶“å…¸å¾©å¤å°éŠæˆ²ã€‚
å®Œæˆå¾Œå°‡çµæœå¯«å…¥ `results/todoist-auto-creative-game.json`ã€‚

## å…±ç”¨è¦å‰‡
å…ˆè®€å– `templates/shared/preamble.md`ï¼Œéµå®ˆå…¶ä¸­æ‰€æœ‰è¦å‰‡ï¼ˆSkill-First + nul ç¦ä»¤ï¼‰ã€‚

å¿…é ˆå…ˆè®€å–ä»¥ä¸‹ SKILL.mdï¼Œåš´æ ¼ä¾ç…§æŒ‡ç¤ºæ“ä½œï¼š
- `skills/game-design/SKILL.md`
- `skills/knowledge-query/SKILL.md`

---

## ä»»å‹™
ä¾æ“šåŸ·è¡Œéšæ®µï¼ˆå‰µå»º/å„ªåŒ–ï¼‰è™•ç†ç¶“å…¸å¾©å¤å°éŠæˆ²ï¼š
- **å‰µå»ºéšæ®µ**ï¼šå¾å„ªå…ˆç´šæ¸…å–®é¸æ“‡æœªå‰µå»ºçš„éŠæˆ²ï¼Œå‰µå»ºå®Œæ•´å¯ç©ç‰ˆæœ¬
- **å„ªåŒ–éšæ®µ**ï¼šé¸æ“‡å·²å‰µå»ºéŠæˆ²ï¼ˆ90% å¾©å¤ + 10% ä½›å­¸ï¼‰ï¼ŒåŠ å…¥å‰µæ„æ”¹è‰¯

## æ ¸å¿ƒè¦æ±‚
1. å¿…é ˆæ˜¯å®Œæ•´å¯ç©çš„éŠæˆ²ï¼ˆé demo æˆ–åŠæˆå“ï¼‰
2. ç¬¦åˆåŸä½œç¶“å…¸ç©æ³•ï¼ˆå¿ æ–¼åŸè‘—ï¼‰
3. åŠ å…¥è‡³å°‘ 1 å€‹å‰µæ„æ”¹è‰¯ï¼ˆè¦–è¦º/éŸ³æ•ˆ/ç©æ³•/UXï¼‰
4. é”åˆ° game-design SKILL.md å“è³ªæ¨™æº–

## ç ”ç©¶è¨»å†Šè¡¨æª¢æŸ¥ï¼ˆé¿å…é‡è¤‡å„ªåŒ–åŒä¸€æ–¹å‘ï¼‰

ç”¨ Read è®€å– `config/dedup-policy.yaml` å–å¾—å»é‡ç­–ç•¥ã€‚
ç”¨ Read è®€å– `context/research-registry.json`ï¼š
- ä¸å­˜åœ¨ â†’ ç”¨ Write å»ºç«‹ç©º registryï¼š`{"version":1,"entries":[]}`
- å­˜åœ¨ â†’ åˆ—å‡ºè¿‘ 7 å¤©å…§ task_type = "creative_game" çš„ entries
- è‹¥è¿‘ 3 å¤©æœ‰ç›¸åŒéŠæˆ²+ç›¸åŒå„ªåŒ–æ–¹å‘ â†’ å¿…é ˆæ›æ–¹å‘æˆ–æ›éŠæˆ²

## åŸ·è¡Œæµç¨‹

### Phase A: éšæ®µåˆ¤å®šèˆ‡éŠæˆ²é¸æ“‡

#### A1. è®€å–é…ç½®ç¢ºå®šåŸ·è¡Œéšæ®µ
1. è®€å– `config/creative-game-mode.yaml` å–å¾—ç•¶å‰ stageï¼ˆcreation æˆ– optimizationï¼‰
2. è®€å– `config/retro-games.yaml` å–å¾—éŠæˆ²æ¸…å–®èˆ‡å„ªå…ˆç´š
3. è®€å– `context/research-registry.json` æª¢æŸ¥å·²å‰µå»º/å„ªåŒ–éŠæˆ²

#### A2. å‰µå»ºéšæ®µé‚è¼¯ï¼ˆstage=creationï¼‰
4. ä¾å„ªå…ˆç´šæƒææœªå‰µå»ºéŠæˆ²ï¼š
   - å¾ tier1_easy é–‹å§‹ï¼Œè·³éé›£åº¦ > skip_difficulty_above çš„éŠæˆ²
   - æ’é™¤è¿‘ 7 å¤©å…§å·²å‰µå»ºçš„ï¼ˆcooldown æ©Ÿåˆ¶ï¼‰
   - è‹¥ tier1 å…¨éƒ¨å®Œæˆ â†’ é€²å…¥ tier2_medium
   - è‹¥ tier1+tier2 å…¨éƒ¨å®Œæˆ â†’ æª¢æŸ¥ tier2_games_available
     - è‹¥ true â†’ å•Ÿç”¨ç¬¬äºŒæ‰¹éŠæˆ²æ¸…å–®ï¼ˆGalaga, Mario Bros, Centipede ç­‰ï¼‰
     - è‹¥ false â†’ è‡ªå‹•åˆ‡æ› stage ç‚º "optimization"ï¼ˆå¯«å› YAMLï¼‰
5. è¼¸å‡ºï¼šã€Œã€å‰µå»ºéšæ®µã€‘æœ¬æ¬¡å‰µå»ºï¼š[éŠæˆ²ä¸­æ–‡å] ([game_id]) v1.0ã€
6. æª¢æŸ¥ D:\Source\game\[game_id] æ˜¯å¦å­˜åœ¨ï¼š
   - ä¸å­˜åœ¨ â†’ å…¨æ–°å‰µå»º
   - å­˜åœ¨ â†’ è¦–ç‚ºå‰µå»ºå¤±æ•—é‡è©¦ï¼Œè¦†è“‹å¼é‡å»º

#### A3. å„ªåŒ–éšæ®µé‚è¼¯ï¼ˆstage=optimizationï¼‰
7. è®€å–è¨ˆæ•¸å™¨åˆ¤æ–·æœ¬æ¬¡å„ªåŒ–å°è±¡ï¼š
   - è‹¥ counter % 10 == 0ï¼ˆç¬¬ 10 æ¬¡ï¼‰ â†’ é¸æ“‡ä½›å­¸éŠæˆ²ï¼ˆD:\Source\game ä¸­çš„ mala-meditation / mindful-memory / six-roots-zen / zen-ink-flow / zen-rhythmï¼‰
   - å¦å‰‡ â†’ é¸æ“‡å¾©å¤éŠæˆ²ï¼ˆLRU ç­–ç•¥ï¼‰
8. å¾©å¤éŠæˆ²é¸æ“‡é‚è¼¯ï¼ˆLRU - Least Recently Usedï¼‰ï¼š
   - è®€å– registryï¼Œè¨ˆç®—æ¯å€‹å¾©å¤éŠæˆ²çš„æœ€å¾Œå„ªåŒ–æ—¥æœŸ
   - å„ªå…ˆé¸æ“‡æœªåœ¨ cooldown æœŸå…§çš„éŠæˆ²ï¼ˆ7 å¤©å¤–ï¼‰
   - **è‹¥æ‰€æœ‰éŠæˆ²éƒ½åœ¨ cooldown æœŸå…§**ï¼ˆé£½å’Œæƒ…æ³ï¼‰ â†’ å¿½ç•¥ cooldownï¼Œé¸æ“‡æœ€ä¹…æœªå„ªåŒ–çš„éŠæˆ²
   - ç¢ºä¿é•·æœŸä¸‹æ‰€æœ‰éŠæˆ²éƒ½èƒ½è¼ªæµå„ªåŒ–
9. è¼¸å‡ºï¼šã€Œã€å„ªåŒ–éšæ®µã€‘æœ¬æ¬¡å„ªåŒ–ï¼š[éŠæˆ²åç¨±] v[ç‰ˆæœ¬è™Ÿ] â†’ v[æ–°ç‰ˆæœ¬è™Ÿ] â€” å‰µæ„æ–¹å‘ï¼š[å¾…ç™¼æƒ³]ã€

### Phase B: éŠæˆ²è¨­è¨ˆèˆ‡å‰µæ„ç™¼æƒ³

#### B1. æŸ¥è©¢çŸ¥è­˜åº«æŠ€è¡“åƒè€ƒ
10. æŸ¥è©¢çŸ¥è­˜åº«ä¸­çš„éŠæˆ²æŠ€è¡“ç­†è¨˜ï¼ˆç¢°æ’åµæ¸¬ã€ç²’å­ç³»çµ±ã€ç‰©ä»¶æ± ç­‰ï¼‰ï¼š
    ```bash
    curl -s -X POST "http://localhost:3000/api/search/hybrid" \
      -H "Content-Type: application/json" \
      -d '{"query": "[éŠæˆ²å] ç¢°æ’åµæ¸¬ Canvas ç‰©ä»¶æ± ", "topK": 5}'
    ```
    - æˆåŠŸ â†’ åƒè€ƒå·²æœ‰ç­†è¨˜ä¸­çš„è¨­è¨ˆæ¨¡å¼å’Œå·²çŸ¥å•é¡Œ
    - å¤±æ•— â†’ è·³éï¼Œç›´æ¥é–‹å§‹ä»»å‹™

#### B2. å‰µå»ºéšæ®µ - ç¢ºå®šæ ¸å¿ƒæ©Ÿåˆ¶
11. ç¢ºå®šéŠæˆ²æ ¸å¿ƒæ©Ÿåˆ¶ï¼ˆä¾ retro-games.yaml çš„ core_mechanicsï¼‰ï¼š
    - å°èœœèœ‚ï¼šå·¦å³ç§»å‹•å°„æ“Šã€å¤–æ˜Ÿäººé™£åˆ—æ¼¸é€²é€¼è¿‘ã€è­·ç›¾ç³»çµ±
    - æ‰“ç£šå¡Šï¼šæ¥çƒæ¿æ§åˆ¶ã€çƒç‰©ç†åå½ˆã€ç£šå¡Šæ¶ˆé™¤èˆ‡æ‰è½é“å…·
    - åƒè±†äººï¼šGrid ç§»å‹•ã€Ghost AI è¿½é€ã€è±†å­æ¶ˆé™¤èˆ‡èƒ½é‡è±†
    - ä¿„ç¾…æ–¯æ–¹å¡Šï¼šæ–¹å¡Šä¸‹è½æ—‹è½‰ã€æ¶ˆè¡Œã€åŠ é€Ÿã€Next é è¦½
    - ï¼ˆå…¶ä»–éŠæˆ²é¡æ¨...ï¼‰
12. å¾ creative_directions é¸æ“‡ 1-2 å€‹å‰µæ„æ”¹è‰¯æ–¹å‘ï¼ˆé¿å…èˆ‡è¿‘æœŸé‡è¤‡ï¼‰ï¼š
    - ğŸ¨ è¦–è¦ºæ•ˆæœï¼šç²’å­ç³»çµ±ã€å‹•ç•«éæ¸¡ã€è‰²å½©æ–¹æ¡ˆã€CRT æ¿¾é¡
    - ğŸ® ç©æ³•æ©Ÿåˆ¶ï¼šé—œå¡è¨­è¨ˆã€é“å…·ç³»çµ±ã€æˆå°±ç³»çµ±ã€é›£åº¦éšæ¢¯
    - ğŸµ éŸ³æ•ˆæ•´åˆï¼šWeb Audio API 8-bit éŸ³æ•ˆã€èƒŒæ™¯éŸ³æ¨‚ã€ADSR åŒ…çµ¡
    - ğŸ“± äº’å‹•é«”é©—ï¼šè§¸æ§æ‰‹å‹¢ã€å¼•å°æ•™å­¸ã€æš«åœå‹•ç•«ã€å¤šèªè¨€
    - âš¡ æ•ˆèƒ½é«”é©—ï¼šç‰©ä»¶æ± å„ªåŒ–ã€OffscreenCanvasã€é è¼‰é€²åº¦æ¢
    - ğŸ§© ç¤¾äº¤å…ƒç´ ï¼šæœ¬åœ°æ’è¡Œæ¦œã€æ¯æ—¥æŒ‘æˆ°ã€åˆ†äº«æˆªåœ–
13. è¼¸å‡ºï¼šã€Œè¨­è¨ˆç›®æ¨™ï¼š[æ ¸å¿ƒæ©Ÿåˆ¶] + å‰µæ„æ–¹å‘ï¼š[å…·é«”æè¿°]ã€

#### B3. å„ªåŒ–éšæ®µ - é¸æ“‡å‰µæ„æ–¹å‘
14. åˆ†æç¾æœ‰éŠæˆ²ç¨‹å¼ç¢¼ï¼Œåˆ—å‡ºå¯æ”¹é€²æ–¹å‘
15. å¾ 6 å¤§å‰µæ„æ–¹å‘é¸æ“‡æœ¬æ¬¡æ”¹è‰¯é‡é»ï¼ˆè¦–è¦º/éŸ³æ•ˆ/ç©æ³•/UX/æ•ˆèƒ½/ç¤¾äº¤ï¼‰
16. è¼¸å‡ºï¼šã€Œå„ªåŒ–ç›®æ¨™ï¼š[éŠæˆ²å] â€” å‰µæ„æ–¹å‘ï¼š[å…·é«”æè¿°]ã€

### Phase C: è¦åŠƒèˆ‡å¯¦ä½œ
17. åˆ—å‡ºå…·é«”ä¿®æ”¹è¨ˆç•«ï¼ˆæ¯é …æ¨™æ³¨é æœŸæ•ˆæœï¼‰
18. åƒè€ƒçŸ¥è­˜åº«ä¸­çš„ç¶“å…¸éŠæˆ²æ¨¡å¼ï¼ˆè‹¥æœ‰ç›¸é—œç­†è¨˜ï¼‰
19. é€ä¸€å¯¦ä½œï¼Œæ¯å®Œæˆä¸€é …ç«‹å³é©—è­‰ï¼š
    - ç„¡ console éŒ¯èª¤
    - éŠæˆ²å¯æ­£å¸¸å•Ÿå‹•å’Œæ“ä½œ
    - æ–°åŠŸèƒ½å¦‚é æœŸé‹ä½œ
20. ç¢ºä¿ä¸ç ´å£ç¾æœ‰åŠŸèƒ½ï¼ˆå‰µå»ºéšæ®µï¼šç„¡ï¼›å„ªåŒ–éšæ®µï¼šå‘å¾Œç›¸å®¹ï¼‰

### Phase D: é©—è­‰
21. å®Œæ•´éŠæˆ²æµç¨‹æª¢æŸ¥ï¼ˆå‰µå»ºéšæ®µï¼šå¿…é ˆå®Œæ•´å¯ç©ï¼ŒéåŠæˆå“ï¼‰
22. éŸ¿æ‡‰å¼æª¢æŸ¥ï¼ˆæ¡Œé¢ + è¡Œå‹•è£ç½®è§¸æ§ï¼‰
23. ä¾ SKILL.md å“è³ªæ¨™æº–è‡ªæª¢ï¼ˆå«å¾©å¤éŠæˆ²å°ˆå±¬æª¢æŸ¥ï¼‰

### Phase E: çŸ¥è­˜åº«å›å¯«
24. æ•´ç†æœ¬æ¬¡å„ªåŒ–å¿ƒå¾—ç‚ºçµæ§‹åŒ–ç­†è¨˜
25. ä¾ knowledge-query SKILL.md æŒ‡ç¤ºåŒ¯å…¥çŸ¥è­˜åº«ï¼š
    a. Write å»ºç«‹ import_note.json
    b. curl POST localhost:3000/api/import
    c. ç¢ºèª imported >= 1
    d. rm import_note.json

### Phase F: æ›´æ–°ç ”ç©¶è¨»å†Šè¡¨ï¼ˆå«ç‰ˆæœ¬è¿½è¹¤ï¼‰
ç”¨ Read è®€å– `context/research-registry.json`ã€‚
ç”¨ Write æ›´æ–°ï¼ŒåŠ å…¥æœ¬æ¬¡ entryï¼š
```json
{
  "date": "ä»Šå¤©æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰",
  "task_type": "creative_game",
  "stage": "creation æˆ– optimization",
  "game_id": "[éŠæˆ² IDï¼Œå¦‚ space_invaders]",
  "version": "v1.0 æˆ– v1.1 æˆ– v2.0",
  "topic": "[éŠæˆ²ä¸­æ–‡å] v[ç‰ˆæœ¬è™Ÿ] â€” [å‰µæ„æ–¹å‘]",
  "kb_note_title": "åŒ¯å…¥çš„ç­†è¨˜æ¨™é¡Œ",
  "kb_imported": trueæˆ–false,
  "tags": ["éŠæˆ²", "å¾©å¤éŠæˆ²", "[éŠæˆ²è‹±æ–‡å]", "v[ç‰ˆæœ¬è™Ÿ]"]
}
```

**ç‰ˆæœ¬è™Ÿè¦å‰‡**ï¼š
- **å‰µå»ºæ™‚**ï¼šv1.0ï¼ˆåˆå§‹ç‰ˆæœ¬ï¼‰
- **å„ªåŒ–æ™‚**ï¼šè®€å– registry ä¸­è©²éŠæˆ²æœ€æ–°ç‰ˆæœ¬ï¼Œéå¢ï¼š
  - å°æ”¹è‰¯ï¼ˆè¦–è¦º/éŸ³æ•ˆå¾®èª¿ï¼‰ï¼š+0.1ï¼ˆå¦‚ v1.0 â†’ v1.1ï¼‰
  - å¤§æ”¹ç‰ˆï¼ˆæ–°ç©æ³•æ©Ÿåˆ¶/é‡æ§‹ï¼‰ï¼š+1.0ï¼ˆå¦‚ v1.5 â†’ v2.0ï¼‰
- **åˆ¤å®šæ¨™æº–**ï¼šè‹¥å‰µæ„æ–¹å‘æ¶‰åŠã€Œæ ¸å¿ƒæ©Ÿåˆ¶è®Šæ›´ã€æˆ–ã€Œæ¶æ§‹é‡æ§‹ã€â†’ å¤§ç‰ˆæœ¬ï¼›å¦å‰‡ â†’ å°ç‰ˆæœ¬

åŒæ™‚ç§»é™¤è¶…é 7 å¤©çš„èˆŠ entryã€‚

### Phase F.5: éƒ¨ç½²åˆ° game_webï¼ˆæ¯æ¬¡å¿…é ˆåŸ·è¡Œï¼Œä¸å¯ç•¥éï¼‰

åŸ·è¡Œå…¨é‡åŒæ­¥ï¼Œç¢ºä¿ game-web.pages.dev èƒ½çœ‹åˆ°æœ¬æ¬¡å‰µå»º/å„ªåŒ–çš„éŠæˆ²ï¼š
```bash
pwsh -ExecutionPolicy Bypass -File "D:\Source\game_web\sync-games.ps1" -Full
```

åˆ¤æ–·çµæœï¼š
- **è…³æœ¬æˆåŠŸï¼ˆexit 0ï¼‰** â†’ ç¹¼çºŒï¼›è…³æœ¬å…§éƒ¨å·²å®Œæˆ npm build + git push game_web
- **è…³æœ¬æç¤ºã€ŒgameMetadata.js å°šç„¡è¨˜éŒ„ã€** â†’ ç”¨ Edit å·¥å…·å°‡æ–°éŠæˆ²åŠ å…¥
  `D:\Source\game_web\js\gameMetadata.js`ï¼ˆåƒè€ƒç¾æœ‰æ¢ç›®æ ¼å¼ï¼‰ï¼Œç„¶å¾Œé‡æ–°åŸ·è¡Œä¸€æ¬¡
- **è…³æœ¬å¤±æ•—ï¼ˆexit 1ï¼‰** â†’ è¨˜éŒ„éŒ¯èª¤åˆ°çµæœ JSON çš„ `remaining_issues`ï¼Œç¹¼çºŒå¾ŒçºŒæ­¥é©Ÿ

è¨˜éŒ„éƒ¨ç½²çµæœï¼ˆä¾› Phase G çš„çµæœ JSON ä½¿ç”¨ï¼‰ï¼š
- éƒ¨ç½²æˆåŠŸ â†’ `game_web_synced: true`
- éƒ¨ç½²å¤±æ•— â†’ `game_web_synced: false`ï¼Œä¸¦è¨˜éŒ„éŒ¯èª¤è¨Šæ¯

## å“è³ªè‡ªè©•è¿´åœˆ
1. å‰µæ„æ˜¯å¦æœ‰å¯¦è³ªçš„é«”é©—æå‡ï¼Ÿï¼ˆä¸åªæ˜¯æŠ€è¡“æ”¹å‹•ï¼‰
2. å¯¦ä½œå“è³ªæ˜¯å¦é”åˆ° SKILL.md æ¨™æº–ï¼Ÿ
3. éŠæˆ²æ˜¯å¦èƒ½æ­£å¸¸é‹è¡Œï¼Ÿ
è‹¥æœªé€šéï¼šä¿®æ­£ â†’ é‡æ–°é©—è­‰ï¼ˆæœ€å¤šè‡ªä¿®æ­£ 2 æ¬¡ï¼‰ã€‚

### Phase G: å¯«å…¥çµæœ JSONï¼ˆåœ˜éšŠæ¨¡å¼å°ˆå±¬ï¼‰
ç”¨ Write å»ºç«‹ `results/todoist-auto-creative-game.json`ï¼š
```json
{
  "agent": "todoist-creative-game",
  "status": "success æˆ– partial æˆ– failed",
  "task_id": null,
  "type": "creative_game",
  "stage": "creation æˆ– optimization",
  "game_id": "[éŠæˆ² ID]",
  "game_name": "[éŠæˆ²ä¸­æ–‡å]",
  "version": "v1.0 æˆ– v1.1 æˆ– v2.0",
  "creative_direction": "[å‰µæ„æ–¹å‘æè¿°]",
  "artifacts": ["D:\\Source\\game\\[game_id]\\index.html", "..."],
  "kb_imported": trueæˆ–false,
  "kb_note_title": "åŒ¯å…¥çš„ç­†è¨˜æ¨™é¡Œ",
  "game_web_synced": trueæˆ–false,
  "quality_score": 1åˆ°5,
  "self_assessment": "ä¸€å¥è©±è‡ªè©•",
  "summary": "ä¸€å¥è©±æ‘˜è¦",
  "error": null
}
```

## å·¥ä½œç›®éŒ„
D:\Source\game
