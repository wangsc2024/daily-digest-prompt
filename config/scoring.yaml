# config/scoring.yaml
# TaskSense å„ªå…ˆç´šè¨ˆåˆ†è¦å‰‡ v2
# ä¿®æ”¹æ­¤æ–‡ä»¶å¯èª¿æ•´æ’åé‚è¼¯ï¼Œä¸éœ€ç¢° prompt

version: 2

formula: "ç¶œåˆåˆ†æ•¸ = Todoist å„ªå…ˆç´šåˆ† Ã— ä¿¡å¿ƒåº¦ Ã— æè¿°åŠ æˆ Ã— æ™‚é–“æ¥è¿‘åº¦ Ã— æ¨™ç±¤æ•¸é‡åŠ æˆ Ã— è¿‘æœŸé‡è¤‡æ‡²ç½°"
max_tasks_per_run: 3  # æ¯æ¬¡æœ€å¤šåŸ·è¡Œ 3 é …

# Todoist priority å°æ‡‰åˆ†æ•¸
priority_scores:
  4: 4  # p1 (priority=4) = 4 åˆ†
  3: 3  # p2 = 3 åˆ†
  2: 2  # p3 = 2 åˆ†
  1: 1  # p4 = 1 åˆ†

# è·¯ç”±å±¤ç´šä¿¡å¿ƒåº¦ä¹˜æ•¸
confidence_multipliers:
  tier1: 1.0   # æ¨™ç±¤è·¯ç”±ï¼ˆ100%ï¼‰
  tier2: 0.8   # é—œéµå­—è·¯ç”±ï¼ˆ80%ï¼‰
  tier3: 0.6   # èªç¾©åˆ¤æ–·ï¼ˆ60%ï¼‰

# æè¿°åŠ æˆ
description_bonus:
  has_description: 1.2  # æœ‰ description æ¬„ä½
  no_description: 1.0   # ç„¡ description æ¬„ä½

# æ™‚é–“æ¥è¿‘åº¦åŠ æˆï¼ˆä¾æˆªæ­¢æ—¥æœŸè·é›¢ï¼‰
time_proximity_bonus:
  overdue: 1.5     # å·²é€¾æœŸ
  today: 1.3       # ä»Šå¤©åˆ°æœŸ
  tomorrow: 1.1    # æ˜å¤©åˆ°æœŸ
  this_week: 1.0   # æœ¬é€±å…§åˆ°æœŸ
  no_due: 0.9      # ç„¡æˆªæ­¢æ—¥æœŸ

# æ¨™ç±¤æ•¸é‡åŠ æˆï¼ˆæ¨™ç±¤è¶Šå¤šä»£è¡¨è¶Šè¢«é‡è¦–ï¼‰
label_count_bonus:
  0: 1.0    # ç„¡æ¨™ç±¤
  1: 1.05   # 1 å€‹æ¨™ç±¤
  2: 1.1    # 2 å€‹æ¨™ç±¤
  3+: 1.15  # 3 å€‹ä»¥ä¸Šæ¨™ç±¤

# è¿‘æœŸé‡è¤‡æ‡²ç½°ï¼ˆé¿å…åŒé¡ä»»å‹™é€£çºŒä½”ç”¨ï¼‰
recency_penalty:
  enabled: true
  description: "ä»Šæ—¥å·²å®Œæˆçš„ç›¸åŒæ¨™ç±¤ä»»å‹™æ•¸é‡è¶Šå¤šï¼Œå¾ŒçºŒåŒæ¨™ç±¤ä»»å‹™åˆ†æ•¸è¶Šä½"
  overlap_0_1: 1.0   # ä»Šæ—¥åŒæ¨™ç±¤å·²å®Œæˆ 0-1 é …ï¼šä¸æ‡²ç½°
  overlap_2: 0.85    # ä»Šæ—¥åŒæ¨™ç±¤å·²å®Œæˆ 2 é …ï¼šÃ—0.85
  overlap_3_plus: 0.7  # ä»Šæ—¥åŒæ¨™ç±¤å·²å®Œæˆ 3+ é …ï¼šÃ—0.7

# æ’åè¼¸å‡ºæ ¼å¼
output_format: |
  | æ’å | ä»»å‹™ | å„ªå…ˆç´š | ä¿¡å¿ƒåº¦ | æ™‚é–“ | æ¨™ç±¤æ•¸ | é‡è¤‡ | ç¶œåˆåˆ† | åŒ¹é… Skill |
  |------|------|--------|--------|------|--------|------|--------|-----------|
  | 1 | ... | p1 ğŸ”´ | 100% | é€¾æœŸÃ—1.5 | 3Ã—1.15 | Ã—1.0 | 7.59 | game-design |
  | 2 | ... | p2 ğŸŸ¡ | 80% | ä»Šå¤©Ã—1.3 | 2Ã—1.1 | Ã—0.85 | 2.93 | knowledge-query |

# allowedTools æ±ºç­–è¡¨
allowed_tools_table:
  read_only: "Read,Bash"
  create_files: "Read,Bash,Write"
  edit_files: "Read,Bash,Edit"
  full_dev: "Read,Bash,Write,Edit"
  web_search: "Read,Bash,WebSearch,WebFetch"
  full_dev_with_search: "Read,Bash,Write,Edit,Glob,Grep"
  research_kb: "Read,Bash,Write,WebSearch,WebFetch"

# å¼·åˆ¶è¦å‰‡
rules:
  - "ä»»å‹™æè¿°å«ã€ŒçŸ¥è­˜åº«ã€æˆ–ã€ŒRAGã€â†’ allowedTools å¿…é ˆåŒ…å« Write"
  - "ä¾ç¶œåˆåˆ†ç”±é«˜åˆ°ä½åŸ·è¡Œ"
